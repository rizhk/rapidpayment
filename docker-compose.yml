services:
  sqlserver:
    image: mcr.microsoft.com/mssql/server:2022-latest
    container_name: sqlserver
    environment:
      ACCEPT_EULA: "Y"
      MSSQL_SA_PASSWORD: "YourStrongPassword123!"  # Change to a strong password!
    ports:
      - "1433:1433"
    volumes:
      - sqlserver-data:/var/opt/mssql  # Persists data across restarts

  paymentmvc:
      image: mcr.microsoft.com/dotnet/sdk:8.0  # ← Use this (Debian-based, full SDK)
      container_name: paymentmvc
      environment:
        - ASPNETCORE_ENVIRONMENT=Development
        - ASPNETCORE_URLS=http://+:80
      ports:
        - "5285:5285"  # Access at http://localhost:5285
      volumes:
        - .:/app  # Shares entire host root → container /app (edit anywhere on Mac)
      working_dir: /app  # Point to your project folder
      # command: ["dotnet", "watch", "run"]  # Hot-reload on file changes
      command: ["tail", "-f", "/dev/null"]
      depends_on:
        - sqlserver


volumes:
  sqlserver-data: